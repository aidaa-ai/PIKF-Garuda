<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Structured Prompt Generator AI</title>
    <style>
        /* CSS dari style.css, diintegrasikan di sini */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        h1 {
            color: #1a73e8;
            text-align: center;
            margin-bottom: 5px;
            font-weight: 700;
        }

        h2 {
            font-size: 1.4em;
            color: #34495e;
            margin-top: 20px;
            margin-bottom: 15px;
        }

        p {
            text-align: center;
            margin-bottom: 25px;
        }

        /* INPUT GRID */
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #c8d0d9;
            border-radius: 8px;
            box-sizing: border-box;
            resize: vertical;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        textarea:focus {
            border-color: #1a73e8;
            box-shadow: 0 0 5px rgba(26, 115, 232, 0.2);
            outline: none;
        }

        /* ACTION INPUT BUTTONS (NEW WRAPPER) */
        .input-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .input-actions button {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #generate-button {
            flex-grow: 1; /* Ambil sisa ruang */
            background-color: #007bff;
            color: white;
        }

        #generate-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        #reset-button {
            width: 150px; /* Lebar tetap untuk tombol reset */
            background-color: #e63946;
            color: white;
        }
        
        #reset-button:hover {
            background-color: #c0303b;
            transform: translateY(-2px);
        }

        /* OUTPUT */
        .output-container.hidden {
            display: none;
        }

        .output-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .output-textarea {
            background-color: #f8f9fa;
            min-height: 250px;
            border: 1px dashed #d1d9e6;
        }

        .output-textarea.final {
            background-color: #e9ecef; /* Warna berbeda untuk kolom non-editable */
            border: 1px solid #34495e;
            color: #2c3e50;
            font-weight: 500;
        }

        .action-buttons {
            text-align: center;
            margin-top: 20px;
        }

        .action-buttons button {
            padding: 10px 20px;
            margin: 0 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #copy-button {
            background-color: #28a745;
            color: white;
        }

        #copy-button:hover {
            background-color: #1e7e34;
        }

        #download-button {
            background-color: #6c757d;
            color: white;
        }

        #download-button:hover {
            background-color: #5a6268;
        }

        /* Responsiveness */
        @media (max-width: 768px) {
            .input-grid, .output-grid {
                grid-template-columns: 1fr; /* Satu kolom di perangkat kecil */
            }
            .input-actions {
                flex-direction: column-reverse; /* Tombol generate di bawah reset di mobile */
            }
            #reset-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ú® Structured Prompt Generator AI</h1>
        <p>Isi 4 kolom di bawah untuk menghasilkan prompt AI yang detail dan kuat.</p>

        <!-- AREA INPUT -->
        <div class="input-grid">
            <div class="input-group">
                <label for="persona">1. Peran (Persona): Siapa AI ini?</label>
                <textarea id="persona" rows="2" placeholder="Contoh: Sebagai Manajer Proyek."></textarea>
            </div>
            <div class="input-group">
                <label for="instruction">2. Instruksi (Instruction): Apa tugasnya?</label>
                <textarea id="instruction" rows="4" placeholder="Contoh: Ringkas teks ini."></textarea>
            </div>
            <div class="input-group">
                <label for="context">3. Konteks (Context): Detail situasi/sumber data?</label>
                <textarea id="context" rows="4" placeholder="Contoh: Berdasarkan email di bawah, Untuk klien VIP."></textarea>
            </div>
            <div class="input-group">
                <label for="format">4. Format (Format): Bentuk output?</label>
                <textarea id="format" rows="2" placeholder="Contoh: Tabel, Email Formal, List."></textarea>
            </div>
        </div>
        
        <!-- TOMBOL AKSI INPUT -->
        <div class="input-actions">
            <button id="generate-button">üöÄ Generate Prompt</button>
            <button id="reset-button">‚ùå Clear Inputs</button>
        </div>


        <!-- AREA OUTPUT -->
        <div id="output-section" class="output-container hidden">
            <h2>üìù Hasil Prompt yang Disempurnakan</h2>
            <div class="output-grid">
                <div class="output-column">
                    <h3>üáÆüá© Draft (Editable)</h3>
                    <textarea id="output-id" class="output-textarea" rows="12"></textarea>
                </div>
                <div class="output-column">
                    <h3>üá¨üáß Final Prompt (Non-Editable)</h3>
                    <textarea id="output-en" class="output-textarea final" rows="12" readonly></textarea>
                </div>
            </div>

            <!-- TOMBOL AKSI OUTPUT -->
            <div class="action-buttons">
                <button id="copy-button" title="Salin teks Bahasa Inggris">üìã Copy to Clipboard</button>
                <button id="download-button" title="Unduh teks Bahasa Inggris">‚¨áÔ∏è Download (.txt)</button>
            </div>
        </div>
    </div>

    <script>
        // JavaScript Logic
        document.addEventListener('DOMContentLoaded', () => {
            const generateButton = document.getElementById('generate-button');
            const resetButton = document.getElementById('reset-button'); // ID baru
            const outputSection = document.getElementById('output-section');
            const outputIdTextarea = document.getElementById('output-id');
            const outputEnTextarea = document.getElementById('output-en');
            const copyButton = document.getElementById('copy-button');
            const downloadButton = document.getElementById('download-button');
            
            // Input Textareas
            const personaTextarea = document.getElementById('persona');
            const instructionTextarea = document.getElementById('instruction');
            const contextTextarea = document.getElementById('context');
            const formatTextarea = document.getElementById('format');


            generateButton.addEventListener('click', generatePrompt);
            resetButton.addEventListener('click', resetInputs); // Event listener baru
            copyButton.addEventListener('click', copyToClipboard);
            downloadButton.addEventListener('click', downloadPrompt);
            
            // Logika generatePrompt yang sudah disempurnakan
            function generatePrompt() {
                // 1. Ambil Input dari Formulir
                const cleanInput = (input) => input.trim()
                    .replace(/^Act as a\s*/i, 'Sebagai ')
                    .replace(/^Your primary task is to\s*/i, '')
                    .replace(/^Deliver the output in the following format:\s*/i, 'Format output adalah ');

                const rawPersona = personaTextarea.value.trim();
                const rawInstruction = instructionTextarea.value.trim();
                const rawContext = contextTextarea.value.trim();
                const rawFormat = formatTextarea.value.trim();
                
                const persona = cleanInput(rawPersona);
                const instruction = cleanInput(rawInstruction);
                const context = cleanInput(rawContext);
                const format = cleanInput(rawFormat);
                
                if (!instruction) {
                    alert('Kolom "Instruksi" tidak boleh kosong.');
                    return;
                }

                // 2. Penggabungan Awal (Draft Indonesia)
                let draftPromptId = '';
                
                // 2.1 Peran
                if (persona) {
                    draftPromptId += `**Peran:** Anda adalah ${persona}. `;
                } else {
                    draftPromptId += `**Peran:** Anda adalah asisten penulisan profesional. `;
                }

                // 2.2 Instruksi
                draftPromptId += `**Instruksi:** Tugas utama Anda adalah ${instruction}. `;
                
                // 2.3 Konteks
                if (context) {
                    draftPromptId += `**Konteks:** ${context}. `;
                }
                
                // 2.4 Format
                if (format) {
                    draftPromptId += `**Format:** ${format}. `;
                } else {
                    draftPromptId += `**Format:** Sajikan dalam bentuk esai lengkap. `;
                }

                // 3. Logika Penyempurnaan (Penambahan detail dan batasan)
                let refinement = 'Kembangkan prompt ini agar lebih detail dan kuatkan batasan outputnya. ';
                
                // Tambahkan batasan berdasarkan Peran (Penulis Muda)
                if (persona.toLowerCase().includes('penulis muda') || persona.toLowerCase().includes('berbakat')) {
                    refinement += 'Gunakan bahasa yang puitis, kaya metafora, dan memiliki alur emosional yang kuat. ';
                }

                // Tambahkan batasan berdasarkan Instruksi (Cerpen)
                if (instruction.toLowerCase().includes('cerpen')) {
                    refinement += 'Pastikan cerpen memiliki plot yang jelas, karakter utama yang relatable, dan konflik-resolusi yang ringkas. Cerita harus memiliki pesan inspiratif yang tersirat. ';
                }
                
                // Tambahkan batasan berdasarkan Format (5 paragraf)
                if (format.toLowerCase().includes('5 paragraf')) {
                    refinement += 'Patuhi batas 5 paragraf secara ketat; pastikan setiap paragraf memiliki panjang yang seimbang. ';
                }

                // Tambahkan batasan berdasarkan Format (JSON/Tabel)
                if (format.toLowerCase().includes('json')) {
                    refinement += 'Pastikan outputnya adalah *string* JSON yang valid dan lengkap. ';
                }
                if (format.toLowerCase().includes('tabel') || instruction.toLowerCase().includes('bandingkan')) {
                    refinement += 'Gunakan Markdown tabel yang rapi dan memiliki kolom header yang jelas. ';
                }

                // Terapkan refinement ke draft
                draftPromptId = `${draftPromptId.trim()} **Penyempurnaan:** ${refinement.trim()}`;

                // 4. Proses Terjemahan (Terjemahan yang disempurnakan)
                const finalPromptEn = translatePrompt(draftPromptId);
                
                // 5. Tampilkan Hasil
                outputIdTextarea.value = draftPromptId;
                outputEnTextarea.value = finalPromptEn;
                outputSection.classList.remove('hidden');
            }

            // --- FUNGSI BARU: RESET INPUTS ---
            function resetInputs() {
                // Bersihkan semua input
                personaTextarea.value = '';
                instructionTextarea.value = '';
                contextTextarea.value = '';
                formatTextarea.value = '';

                // Sembunyikan dan bersihkan output
                outputIdTextarea.value = '';
                outputEnTextarea.value = '';
                outputSection.classList.add('hidden');
            }

            // Fungsi Terjemahan Lengkap (Diperluas untuk mencakup refinement logic)
            function translatePrompt(textId) {
                // Mapping terjemahan kunci (HANYA SIMULASI)
                let textEn = textId;
                
                // Terjemahan Bagian Struktur
                textEn = textEn
                    .replace('**Peran:** Anda adalah sebagai', '**Persona:** Act as a')
                    .replace('**Peran:** Anda adalah', '**Persona:** Act as a')
                    .replace('**Instruksi:** Tugas utama Anda adalah', '**Instruction:** Your primary task is to')
                    .replace('**Konteks:**', '**Context:**')
                    .replace('**Format:**', '**Format:**')
                    .replace('**Penyempurnaan:**', '**Refinement & Constraints:**')
                    .replace('Anda adalah asisten penulisan profesional.', 'You are a professional writing assistant.');
                
                // Terjemahan Khusus Refinement Logic (harus sinkron dengan langkah 3)
                textEn = textEn
                    .replace('Kembangkan prompt ini agar lebih detail dan kuatkan batasan outputnya.', 'Elaborate on this prompt to be more detailed and strengthen the output constraints.')
                    .replace('Gunakan bahasa yang puitis, kaya metafora, dan memiliki alur emosional yang kuat.', 'Use poetic language, rich metaphors, and a strong emotional narrative arc.')
                    .replace('Pastikan cerpen memiliki plot yang jelas, karakter utama yang relatable, dan konflik-resolusi yang ringkas. Cerita harus memiliki pesan inspiratif yang tersirat.', 'Ensure the short story has a clear plot, a relatable main character, and a concise conflict-resolution. The narrative must convey an underlying inspirational message.')
                    .replace('Patuhi batas 5 paragraf secara ketat; pastikan setiap paragraf memiliki panjang yang seimbang.', 'Strictly adhere to the 5-paragraph limit; ensure each paragraph has a balanced length.')
                    .replace('Pastikan outputnya adalah *string* JSON yang valid dan lengkap.', 'Ensure the output is a valid and complete JSON string.')
                    .replace('Gunakan Markdown tabel yang rapi dan memiliki kolom header yang jelas.', 'Use a clean Markdown table with clear header columns.');


                return textEn.trim();
            }

            function copyToClipboard() {
                // Salin HANYA konten Bahasa Inggris
                outputEnTextarea.select();
                outputEnTextarea.setSelectionRange(0, 99999);
                try {
                    document.execCommand('copy');
                    alert('Prompt Bahasa Inggris berhasil disalin!');
                } catch (err) {
                    navigator.clipboard.writeText(outputEnTextarea.value).then(() => {
                        alert('Prompt Bahasa Inggris berhasil disalin!');
                    }).catch(() => {
                        alert('Gagal menyalin. Silakan salin manual.');
                    });
                }
            }

            function downloadPrompt() {
                // Unduh HANYA konten Bahasa Inggris
                const filename = 'AI_Structured_Prompt.txt';
                const text = outputEnTextarea.value;
                
                const element = document.createElement('a');
                element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
                element.setAttribute('download', filename);

                element.style.display = 'none';
                document.body.appendChild(element);

                element.click();

                document.body.removeChild(element);
            }
        });
    </script>
</body>
</html>
